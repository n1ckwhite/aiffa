#  Hotkeys скринридеров: управление фокусом и навигация

Знание горячих клавиш скринридеров помогает разработчикам тестировать A11Y и понимать, как пользователи взаимодействуют с интерфейсом. Основные команды: Tab/Shift+Tab, буквенная навигация (H, L, B), режимы курсора.

---

##  Короткое резюме
- **Универсальные**: Tab, Shift+Tab, Enter, Space работают везде.
- **Буквенная навигация**: H (заголовки), L (ссылки), B (кнопки), F (формы).
- **Специфичные**: каждый SR имеет свои модификаторы (Insert, Ctrl+Option).
- **Что уметь**: тестировать навигацию клавиатурой, понимать пользовательский опыт SR. 

---

##  Универсальные команды (работают везде)

### Базовая навигация
```
Tab                    → Следующий интерактивный элемент
Shift + Tab           → Предыдущий интерактивный элемент
Enter                 → Активировать ссылку/кнопку
Space                 → Активировать кнопку/чекбокс
Стрелки               → Навигация в группах (radio, select)
Escape                → Закрыть диалог/меню
```

### Навигация по странице
```
Home                  → Начало строки/страницы
End                   → Конец строки/страницы
Ctrl + Home           → Начало документа
Ctrl + End            → Конец документа
Page Up/Page Down     → Прокрутка страницы
```

---

##  Буквенная навигация (NVDA, JAWS)

### Быстрая навигация по типам элементов
```
H / Shift + H         → Заголовки (вперёд/назад)
L / Shift + L         → Ссылки
B / Shift + B         → Кнопки
F / Shift + F         → Поля форм
T / Shift + T         → Таблицы
G / Shift + G         → Графика/изображения
D / Shift + D         → Ориентиры (landmarks)
1-6 / Shift + 1-6     → Заголовки определённого уровня
```

### Специальные элементы
```
R / Shift + R         → Радиокнопки
X / Shift + X         → Чекбоксы
C / Shift + C         → Комбобоксы
E / Shift + E         → Поля ввода
A / Shift + A         → Якоря
S / Shift + S         → Сепараторы
```

---

##  NVDA (Windows)

### Основные команды
```
Insert + Space        → Переключение режимов (Browse/Focus)
Insert + Tab          → Информация о текущем элементе
Insert + F7           → Список элементов (ссылки, заголовки, формы)
Insert + стрелки      → Чтение по символам/словам/строкам
Insert + N            → Настройки навигации
```

### Чтение и навигация
```
Insert + ↑/↓          → Чтение строки
Insert + ←/→          → Чтение символа
Ctrl + ←/→            → Чтение слова
Insert + Ctrl + ←/→   → Чтение по предложениям
Numpad 5              → Текущий символ/элемент
```

### Практический пример тестирования
```html
<!-- Тестируем эту структуру -->
<nav aria-label="Основная навигация">
  <ul>
    <li><a href="/">Главная</a></li>
    <li><a href="/about">О нас</a></li>
  </ul>
</nav>

<main>
  <h1>Заголовок страницы</h1>
  <form>
    <label for="search">Поиск</label>
    <input id="search" type="text">
    <button type="submit">Найти</button>
  </form>
</main>
```

**Тестирование с NVDA:**
1. `D` — переход к навигации
2. `H` — переход к заголовку h1
3. `F` — переход к форме
4. `Tab` — по полям формы

---

##  JAWS (Windows)

### Основные команды
```
Insert + Tab          → Описание элемента
Insert + F6           → Список заголовков
Insert + F7           → Список ссылок
Insert + F3           → Список элементов форм
Insert + F5           → Список полей форм
Insert + стрелки      → Навигация и чтение
```

### Специальные функции
```
Insert + V            → Виртуальный курсор вкл/выкл
Insert + Z            → Режим приложения
Insert + Ctrl + ;     → Список ориентиров
Insert + T            → Заголовок окна
Insert + Ctrl + Home  → Начало документа
```

### Режимы JAWS
- **Virtual Cursor Mode** — для чтения веб‑страниц
- **PC Cursor Mode** — для приложений
- **Forms Mode** — автоматически в формах

---

##  VoiceOver (macOS)

### Основные команды
```
Ctrl + Option + стрелки    → Навигация по элементам
Ctrl + Option + Space      → Активация элемента
Ctrl + Option + Shift + ↓  → Вход в группу
Ctrl + Option + Shift + ↑  → Выход из группы
Ctrl + Option + F5         → Статистика страницы
```

### Навигация по типам
```
Ctrl + Option + Cmd + H    → Заголовки
Ctrl + Option + Cmd + L    → Ссылки
Ctrl + Option + Cmd + J    → Элементы форм
Ctrl + Option + Cmd + T    → Таблицы
Ctrl + Option + Cmd + G    → Графика
```

### Ротор VoiceOver
```
Ctrl + Option + U          → Открыть ротор
Стрелки ←/→               → Выбор типа элементов
Стрелки ↑/↓               → Навигация по элементам
Enter                      → Переход к элементу
```

---

##  Мобильные скринридеры

### VoiceOver (iOS)
```
Свайп вправо              → Следующий элемент
Свайп влево               → Предыдущий элемент
Двойной тап               → Активация
Тройной тап               → Прокрутка
Ротор (поворот двумя пальцами) → Выбор типа навигации
```

### TalkBack (Android)
```
Свайп вправо              → Следующий элемент
Свайп влево               → Предыдущий элемент
Двойной тап               → Активация
Свайп вверх/вниз          → Изменение гранулярности чтения
```

---

##  Практические советы для разработчиков

### Тестирование навигации
```js
// Проверяем логичность порядка Tab
function testTabOrder() {
  const focusableElements = document.querySelectorAll(
    'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
  );
  
  console.log('Порядок Tab‑навигации:');
  focusableElements.forEach((el, index) => {
    console.log(`${index + 1}. ${el.tagName} - ${el.textContent || el.value || el.alt}`);
  });
}
```

### Эмуляция SR‑навигации
```js
// Находим все заголовки (эмуляция клавиши H)
function findHeadings() {
  const headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');
  return Array.from(headings).map(h => ({
    level: h.tagName,
    text: h.textContent,
    element: h
  }));
}

// Находим все ссылки (эмуляция клавиши L)
function findLinks() {
  const links = document.querySelectorAll('a[href]');
  return Array.from(links).map(link => ({
    text: link.textContent,
    href: link.href,
    element: link
  }));
}
```

### Проверка доступности элементов
```html
<!-- Хорошая структура для SR -->
<nav aria-label="Основная навигация">
  <h2 class="sr-only">Навигация по сайту</h2>
  <ul>
    <li><a href="/" aria-current="page">Главная</a></li>
    <li><a href="/products">Товары</a></li>
  </ul>
</nav>

<main>
  <h1>Каталог товаров</h1>
  
  <form role="search" aria-label="Поиск товаров">
    <label for="search">Найти товар</label>
    <input id="search" type="search" aria-describedby="search-help">
    <div id="search-help" class="sr-only">
      Введите название или артикул товара
    </div>
    <button type="submit">Найти</button>
  </form>
</main>
```

---

##  Режимы работы скринридеров

### Browse Mode (Виртуальный курсор)
- **Назначение**: чтение и навигация по контенту
- **Команды**: буквенная навигация работает
- **Когда**: по умолчанию на веб‑страницах

### Focus Mode (Режим форм)
- **Назначение**: взаимодействие с элементами
- **Команды**: буквенная навигация отключена
- **Когда**: автоматически в полях ввода

### Application Mode
- **Назначение**: веб‑приложения с кастомной навигацией
- **Команды**: передаются приложению
- **Когда**: `role="application"`

---

##  Практические правила
- **Изучите основные команды** — Tab, буквенная навигация, Enter/Space
- **Тестируйте в Browse Mode** — большинство пользователей начинают с него
- **Проверяйте порядок Tab** — он должен быть логичным
- **Используйте заголовки** — основной способ навигации по странице
- **Тестируйте без мыши** — только клавиатура и SR‑команды

> Важно: понимание SR‑команд помогает создавать интуитивно понятные интерфейсы.

---

##  Итог
- Универсальные команды (Tab, Enter) работают везде.
- Буквенная навигация — мощный инструмент быстрого перемещения.
- Каждый SR имеет особенности, но принципы схожи. 

##  ЗАДАЧИ

Набор задач для практики `SR‑команд`:

---

###  Задача 1: Планирование навигации
 У вас есть страница с навигацией, заголовком, формой поиска и контентом. В каком порядке пользователь SR будет их находить клавишей H?

```html
<nav>...</nav>
<main>
  <div>Реклама</div>
  <h1>Главная страница</h1>
  <form>
    <h2>Поиск</h2>
    <input type="search">
  </form>
  <section>
    <h2>Новости</h2>
    <article>
      <h3>Статья 1</h3>
    </article>
  </section>
</main>
```

<details>
<summary> Решение</summary>

Порядок навигации клавишей H:
1. `h1` — Главная страница
2. `h2` — Поиск  
3. `h2` — Новости
4. `h3` — Статья 1

Навигация пропустит `<nav>` (нет заголовка) и рекламу.

</details>

---

###  Задача 2: Тестирование Tab‑порядка
 Проверьте логичность Tab‑навигации в этой форме.

```html
<form>
  <input type="text" placeholder="Имя" tabindex="3">
  <input type="email" placeholder="Email" tabindex="1">  
  <textarea placeholder="Сообщение" tabindex="2"></textarea>
  <button type="submit">Отправить</button>
</form>
```

<details>
<summary> Решение</summary>

**Проблема**: порядок нарушен из‑за tabindex.

**Порядок Tab:**
1. Email (tabindex="1")
2. Сообщение (tabindex="2")  
3. Имя (tabindex="3")
4. Кнопка (естественный порядок)

**Исправление**: убрать tabindex, использовать естественный DOM‑порядок.

</details>

---

###  Задача 3: Эмуляция SR‑навигации
 Напишите функцию, которая находит все кнопки на странице (эмуляция клавиши B).

```js
function findButtons() {
  // Ваш код
}
```

<details>
<summary> Решение</summary>

```js
function findButtons() {
  const buttons = document.querySelectorAll('button, input[type="button"], input[type="submit"], [role="button"]');
  
  return Array.from(buttons)
    .filter(btn => !btn.hidden && !btn.disabled)
    .map(btn => ({
      text: btn.textContent || btn.value || btn.getAttribute('aria-label'),
      type: btn.tagName.toLowerCase(),
      element: btn
    }));
}
```

</details>

---

##  Самопроверка

1. Какая клавиша используется для навигации по заголовкам в NVDA/JAWS?

<details>
<summary> Вывод</summary>
Клавиша `H` (вперёд) и `Shift + H` (назад). Цифры 1‑6 для конкретных уровней заголовков.
</details>

2. Чем отличается Browse Mode от Focus Mode?

<details>
<summary> Вывод</summary>
Browse Mode — для чтения/навигации (буквенные команды работают). Focus Mode — для взаимодействия с элементами (буквенные команды отключены).
</details>

3. Какие команды универсальны для всех скринридеров?

<details>
<summary> Вывод</summary>
Tab/Shift+Tab, Enter, Space, стрелки — работают везде независимо от SR.
</details>

---

 Эти задачи помогают закрепить: понимание SR‑навигации, планирование логичного порядка элементов и эмуляцию пользовательского опыта скринридеров.

---
