#  Flexbox: кроссбраузерные особенности и известные баги

Современные браузеры хорошо поддерживают Flexbox, однако встречаются нюансы (особенно в старых движках и iOS Safari). Ниже — практические советы и частые проблемы с решениями.

---

##  Поддержка и автопрефиксы

- Актуальные Chrome/Firefox/Safari/Edge — поддержка полная.
- IE 10/11 — старый синтаксис `-ms-`, неполная поддержка, множество багов.
- Используйте Autoprefixer (PostCSS) с актуальным `browserslist`.

```bash
npx browserslist "defaults"
```

---

##  Частые проблемы и решения

###  1) Элементы «не сжимаются» как ожидается
- Причина: у flex-детей по умолчанию `min-width: auto` → ширина не меньше содержимого.
- Решение: задайте `min-width: 0` или `overflow: hidden` для разрешения сжатия/переноса.

```css
.content { flex: 1 1 auto; min-width: 0; }
```

###  2) Проценты и `flex-basis` в колонках
- В `flex-direction: column` проценты по `flex-basis` зависят от высоты контейнера.
- Решение: задайте явную высоту/ограничения контейнера.

###  3) iOS Safari: проблемы с `vh` и клавиатурой
- Мобильная адресная строка меняет `vh`, ломая вертикальное центрирование.
- Решение: используйте CSS `min-height: 100dvh` или JS-поллифил вычисления высоты.

```css
.screen { min-height: 100dvh; }
```

###  4) Старые Safari/IE: `flex-basis` vs `width`
- Могут по-разному интерпретировать приоритеты.
- Решение: используйте шорткат `flex` и избегайте одновременного задания конфликтующих свойств.

###  5) Гапы и межстрочные отступы
- `gap` поддерживается во всех современных браузерах; в старых — нет.
- Решение: для очень старых браузеров — фоллбек на маргины.

###  6) Псевдоэлементы в flex-контейнере
- В старых браузерах псевдоэлементы иногда не участвуют в распределении как ожидается.
- Решение: использовать дополнительные обёртки при сложной типографике.

---

##  Настройки инструментов

`.browserslist` в `package.json` или отдельном файле:
```json
{
  "browserslist": [
    "defaults",
    "not ie <= 11"
  ]
}
```

PostCSS + Autoprefixer: убедитесь, что пресеты включены в сборку.

---

##  Полезные ресурсы

- MDN — Flexbox: https://developer.mozilla.org/ru/docs/Web/CSS/CSS_flexible_box_layout/Basic_concepts_of_flexbox
- Flexbugs (известные баги): https://github.com/philipwalton/flexbugs
- caniuse — flexbox: https://caniuse.com/flexbox

---

##  Итог

- Современные браузеры — ок; старые IE/Safari содержат подводные камни.
- Используйте Autoprefixer, задавайте `min-width: 0` для реально сжимаемых областей, аккуратно работайте с процентами в колонках и `vh` на мобильных.

---