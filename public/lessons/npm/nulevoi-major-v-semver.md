#  Нулевой MAJOR в Semver

Когда MAJOR-версия пакета равна 0 (например, 0.x.y), это указывает, что пакет находится в стадии разработки или начального тестирования, и правила совместимости в рамках SemVer применяются с определёнными оговорками.

---

##  1. Основные характеристики версий с MAJOR = 0

###  **Нестабильность**

Версии с MAJOR = 0 (0.x.y) считаются экспериментальными. API может меняться без сохранения обратной совместимости даже между MINOR-версиями.

###  **Ключевые особенности**

* API может меняться без сохранения обратной совместимости
* Изменения внутри пакета могут быть значительными и неожиданными
* Пакет находится в стадии активной разработки
* Не предназначен для широкой аудитории или продакшена

###  **Пример нестабильности**

```javascript
// Версия 0.1.0
function processData(data) {
  return { result: data };
}

// Версия 0.2.0 - может быть несовместима!
function processData(data, options = {}) {
  return { 
    processed: data,
    metadata: options.metadata 
  };
}
```

---

##  2. Правила увеличения версий

###  **PATCH (0.1.1 → 0.1.2)**

Внесены исправления ошибок, которые не изменяют поведение или интерфейсы.

```javascript
// Версия 0.1.1
function calculate(a, b) {
  return a + b; // баг: не обрабатывает undefined
}

// Версия 0.1.2 - исправление
function calculate(a, b) {
  return (a || 0) + (b || 0); // исправлено
}
```

###  **MINOR (0.1.0 → 0.2.0)**

Возможны изменения API, новые функции или даже удаления старых функций. Это поведение отличается от правил, действующих при MAJOR ≥ 1.

```javascript
// Версия 0.1.0
class API {
  getData() { /* ... */ }
  setData() { /* ... */ }
}

// Версия 0.2.0 - может быть несовместима!
class API {
  fetchData() { /* ... */ }  // переименовано
  updateData() { /* ... */ } // переименовано
  validateData() { /* ... */ } // новый метод
}
```

###  **MAJOR = 0 (0.x.y)**

Указывает, что пакет ещё не достиг стабильной версии, поэтому даже MINOR-обновления могут быть несовместимыми.

---

##  3. Трактовка MINOR-версий как MAJOR

###  **"Мини-MAJOR" концепция**

Пока MAJOR = 0, каждая MINOR-версия (0.x) может рассматриваться как "мини-MAJOR", и её обновление требует осторожности.

###  **Пример поведения**

```bash
# Исходная версия
0.1.0: первый релиз с некоторым функционалом

# Обновления
0.1.1: исправление ошибки без изменений в API
0.2.0: добавлены новые функции или изменён API (обратная совместимость может быть нарушена)
0.3.0: снова изменён API или добавлена новая функциональность, не совместимая с 0.2.0
```

###  **Практический пример**

```json
{
  "dependencies": {
    "experimental-lib": "0.1.0"  // Осторожно! Может сломаться при обновлении
  }
}
```

---

##  4. Сравнение с MAJOR ≥ 1

###  **Таблица сравнения**

| Аспект | MAJOR = 0 | MAJOR ≥ 1 |
|--------|-----------|-----------|
| **MINOR** | Может нарушать совместимость | Сохраняет совместимость |
| **PATCH** | Фиксирует только баги | Фиксирует только баги |
| **Стабильность** | Подразумевается нестабильность | Стабильное API |
| **Использование** | Экспериментальное | Продакшн |

###  **Примеры различий**

```javascript
// MAJOR = 0: MINOR может быть несовместимым
// 0.1.0 → 0.2.0: может сломать код

// MAJOR ≥ 1: MINOR совместим
// 1.1.0 → 1.2.0: обратная совместимость гарантирована
```

---

##  5. Когда использовать MAJOR = 0?

###  **На этапе активной разработки**

* API пакета ещё не сформировано
* Ожидается множество изменений в функциональности
* Для пакетов, которые не предназначены для широкой аудитории
* Для экспериментов и прототипов

###  **Примеры использования**

```json
{
  "dependencies": {
    "prototype-lib": "0.1.0",      // Экспериментальная библиотека
    "research-tool": "0.2.0",      // Исследовательский инструмент
    "alpha-framework": "0.3.0"     // Альфа версия фреймворка
  }
}
```

###  **Переход к MAJOR ≥ 1**

Если стабильность API важна, следует перейти к MAJOR ≥ 1, когда структура и функционал пакета стабилизируются.

```bash
# Когда API стабилизировался
0.3.0 → 1.0.0  # Переход к стабильной версии
```

---

##  6. Рекомендации

###  **При использовании пакетов с MAJOR = 0**

* Избегайте автоматического обновления MINOR-версий
* Уточняйте версию зависимостей в явном диапазоне
* Тестируйте после каждого обновления

###  **Примеры безопасного использования**

```json
{
  "dependencies": {
    // Безопасно: только PATCH обновления
    "experimental": "~0.1.0",
    
    // Осторожно: явный диапазон
    "alpha-lib": ">=0.1.0 <0.2.0",
    
    // Точная версия для максимальной безопасности
    "unstable": "0.1.0"
  }
}
```

###  **Переход на MAJOR = 1**

Переход на MAJOR = 1 должен сопровождаться чётким описанием стабильности API и строгим следованием SemVer.

```bash
# Подготовка к стабильной версии
npm version major  # 0.3.0 → 1.0.0

# Обновление документации
# Описание breaking changes
# Тестирование совместимости
```

---

##  7. Практические примеры

###  **Пример развития пакета**

```bash
# Этап разработки
0.1.0 - Первый релиз с базовым функционалом
0.1.1 - Исправление бага
0.1.2 - Еще одно исправление
0.2.0 - Добавлены новые функции (может быть несовместимо)
0.2.1 - Исправления в новой версии
0.3.0 - Переработка API (несовместимо с 0.2.x)

# Переход к стабильной версии
1.0.0 - Стабильный API, строгое следование SemVer
```

###  **Пример package.json**

```json
{
  "name": "experimental-lib",
  "version": "0.2.1",
  "description": "Экспериментальная библиотека - API может меняться",
  "engines": {
    "node": ">=14.0.0"
  },
  "dependencies": {
    "stable-dependency": "^1.0.0",
    "experimental-dependency": "~0.1.0"
  }
}
```

---

##  8. Инструменты и команды

###  **Проверка совместимости**

```bash
# Проверить, какие версии доступны
npm view package versions

# Установить конкретную версию
npm install package@0.1.0

# Проверить зависимости
npm ls package
```

###  **Управление версиями**

```bash
# Увеличить PATCH версию
npm version patch  # 0.1.0 → 0.1.1

# Увеличить MINOR версию
npm version minor  # 0.1.1 → 0.2.0

# Перейти к MAJOR = 1
npm version major  # 0.3.0 → 1.0.0
```

---

##  Итог

| Версия | Стабильность | Совместимость | Рекомендации |
|--------|--------------|---------------|--------------|
| **0.x.y** | Нестабильная | MINOR может нарушать | Только для разработки |
| **1.x.y** | Стабильная | MINOR совместим | Для продакшена |

##  ЗАДАЧИ

Задачи по теме `Нулевой MAJOR в Semver`

---

###  Задача 1: Определить совместимость

Определите, совместимы ли версии: 0.1.0 → 0.1.1, 0.1.0 → 0.2.0, 0.2.0 → 0.3.0, 0.3.0 → 1.0.0.

<details>
<summary> Решение</summary>

**Ответ:** 0.1.0 → 0.1.1 (совместимы), 0.1.0 → 0.2.0 (может быть несовместимо), 0.2.0 → 0.3.0 (может быть несовместимо), 0.3.0 → 1.0.0 (стабильная версия).

**Объяснение:** При MAJOR = 0 только PATCH изменения гарантированно совместимы, MINOR может нарушать совместимость.

</details>

---

###  Задача 2: Выбрать диапазон версий

Какой диапазон версий безопасен для пакета с MAJOR = 0: `^0.1.0`, `~0.1.0`, `>=0.1.0 <0.2.0`, `0.1.0`?

<details>
<summary> Решение</summary>

**Ответ:** `~0.1.0` и `>=0.1.0 <0.2.0` — безопасны (только PATCH), `^0.1.0` — осторожно (MINOR может сломать), `0.1.0` — максимальная безопасность.

**Объяснение:** При MAJOR = 0 лучше ограничивать обновления только PATCH версиями.

</details>

---

###  Задача 3: Определить готовность к MAJOR = 1

Когда пакет готов к переходу на MAJOR = 1: API стабилизировался, есть пользователи, завершена разработка, есть документация?

<details>
<summary> Решение</summary>

**Ответ:** API стабилизировался — главный критерий. Остальные факторы важны, но не критичны.

**Объяснение:** Переход к MAJOR = 1 означает стабильный API и строгое следование SemVer.

</details>

---

 Таким образом, нулевой MAJOR отражает, что пакет в стадии "альфа" или "бета" и что изменения, даже в MINOR, могут быть несовместимыми.

---
