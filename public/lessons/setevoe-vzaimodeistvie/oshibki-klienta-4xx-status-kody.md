#  HTTP статус-коды ошибок клиента (4xx): теория и практика

При ошибке клиента сервер обычно возвращает статус-коды в диапазоне **400 (4xx)**. Эти коды указывают на проблемы, связанные с запросом клиента, и помогают понять, что именно пошло не так.

##  Основные ошибки клиента (4xx)

### 400 Bad Request — Неверный запрос
- **Описание**: Сервер не может обработать запрос из-за неверного синтаксиса или некорректных данных.
- **Причины**: Неправильный JSON, отсутствующие обязательные поля, неверный формат данных.
- **Пример**: Отправка формы с пустыми обязательными полями или некорректным JSON.

### 401 Unauthorized — Неавторизован
- **Описание**: Запрос требует аутентификации, но клиент не предоставил необходимые данные.
- **Причины**: Отсутствие токена авторизации, неверные логин/пароль, истёкший токен.
- **Пример**: Попытка доступа к защищённому API без токена авторизации.

### 403 Forbidden — Доступ запрещён
- **Описание**: Сервер понял запрос, но отказывается его выполнять из-за недостаточных прав.
- **Причины**: У пользователя нет прав для доступа к ресурсу, IP заблокирован.
- **Пример**: Попытка удалить чужой пост или получить доступ к админ-панели.

### 404 Not Found — Не найдено
- **Описание**: Запрашиваемый ресурс не найден на сервере.
- **Причины**: Неверный URL, ресурс удалён, опечатка в адресе.
- **Пример**: Запрос к несуществующей странице или API-эндпоинту.

### 405 Method Not Allowed — Метод не разрешён
- **Описание**: Используемый HTTP-метод не поддерживается для данного ресурса.
- **Причины**: POST к ресурсу, который поддерживает только GET, или наоборот.
- **Пример**: Попытка отправить DELETE-запрос к эндпоинту, который не поддерживает удаление.

---

##  Примеры обработки ошибок в JavaScript

###  Пример: Обработка 400 Bad Request
```javascript
fetch('/api/users', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ name: '' }) // Пустое обязательное поле
})
  .then(response => {
    if (response.status === 400) {
      console.error('Bad Request: Проверьте данные формы');
      return response.json();
    }
  })
  .then(errorData => {
    console.log('Ошибки валидации:', errorData);
  });
```

###  Пример: Обработка 401 Unauthorized
```javascript
fetch('/api/protected', {
  headers: { 'Authorization': 'Bearer invalid-token' }
})
  .then(response => {
    if (response.status === 401) {
      console.error('Unauthorized: Требуется авторизация');
      // Перенаправить на страницу входа
      window.location.href = '/login';
    }
  });
```

###  Пример: Обработка 404 Not Found
```javascript
fetch('/api/users/999999')
  .then(response => {
    if (response.status === 404) {
      console.error('Not Found: Пользователь не найден');
      // Показать сообщение пользователю
      showMessage('Пользователь не найден');
    }
  });
```

---

##  Таблица популярных ошибок 4xx

| Код | Название              | Описание                              | Типичные причины                     |
|-----|----------------------|---------------------------------------|--------------------------------------|
| 400 | Bad Request          | Неверный синтаксис запроса            | Некорректный JSON, пустые поля       |
| 401 | Unauthorized         | Требуется авторизация                 | Отсутствие токена, неверные данные   |
| 403 | Forbidden            | Доступ запрещён                       | Недостаточно прав, IP заблокирован   |
| 404 | Not Found            | Ресурс не найден                      | Неверный URL, ресурс удалён          |
| 405 | Method Not Allowed   | Метод не поддерживается               | POST вместо GET, DELETE не разрешён  |
| 409 | Conflict             | Конфликт данных                       | Дублирование уникальных полей        |
| 422 | Unprocessable Entity | Данные не могут быть обработаны       | Валидация не прошла                 |
| 429 | Too Many Requests    | Слишком много запросов                | Превышен лимит запросов             |

---

##  Советы по обработке ошибок 4xx

- **400**: Проверяйте формат отправляемых данных и обязательные поля.
- **401**: Перенаправляйте пользователя на страницу входа или запрашивайте токен.
- **403**: Показывайте понятное сообщение о недостатке прав.
- **404**: Предлагайте альтернативные действия или поиск.
- **405**: Проверяйте документацию API для правильных методов.
- Всегда обрабатывайте ошибки на клиенте для лучшего UX.

---

##  Итог

- Ошибки 4xx указывают на проблемы с запросом клиента.
- Правильная обработка этих ошибок улучшает пользовательский опыт.
- Знание типичных причин помогает быстрее находить и исправлять проблемы.

##  ЗАДАЧИ

Задачи по теме `HTTP ошибки клиента (4xx)`:

---

###  Задача 1: Определи ошибку
Какой статус-код вернёт сервер, если пользователь попытается получить доступ к защищённой странице без авторизации?
<details>
<summary> Решение</summary>

**Ответ:**
401 Unauthorized — требуется авторизация для доступа к ресурсу.

</details>

---

###  Задача 2: Неверный запрос
Какой код вернёт сервер при отправке некорректного JSON в POST-запросе?
<details>
<summary> Решение</summary>

**Ответ:**
400 Bad Request — сервер не может обработать запрос из-за неверного синтаксиса.

</details>

---

###  Задача 3: Ресурс не найден
Какой код вернёт сервер при запросе к несуществующему API-эндпоинту?
<details>
<summary> Решение</summary>

**Ответ:**
404 Not Found — запрашиваемый ресурс не найден на сервере.

</details>

---

###  Задача 4: Метод не разрешён
Какой код вернёт сервер при попытке отправить DELETE-запрос к эндпоинту, который поддерживает только GET?
<details>
<summary> Решение</summary>

**Ответ:**
405 Method Not Allowed — используемый HTTP-метод не поддерживается для данного ресурса.

</details>

---

###  Задача 5: Обработка ошибок
Напишите код для обработки различных ошибок 4xx в fetch-запросе:
<details>
<summary> Решение</summary>

```javascript
fetch('/api/users', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ name: 'John' })
})
  .then(response => {
    if (response.status === 400) {
      console.error('Bad Request');
    } else if (response.status === 401) {
      console.error('Unauthorized');
    } else if (response.status === 403) {
      console.error('Forbidden');
    } else if (response.status === 404) {
      console.error('Not Found');
    } else if (response.status === 405) {
      console.error('Method Not Allowed');
    }
  });
```

</details>

---

###  Задача 6: Разница между 401 и 403
В чём разница между ошибками 401 Unauthorized и 403 Forbidden?
<details>
<summary> Решение</summary>

**Ответ:**
401 — клиент не предоставил данные для авторизации (нужно войти).
403 — клиент авторизован, но у него нет прав для доступа к ресурсу.

</details>

---

 Эти задачи помогут закрепить понимание ошибок клиента (4xx) и их правильную обработку в веб-приложениях! 