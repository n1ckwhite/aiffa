#  Различия между HTTP методами PATCH и PUT

Методы HTTP **PATCH** и **PUT** используются для обновления ресурсов на сервере, но различаются по семантике, объёму передаваемых данных и поведению при обновлении.

##  Основные различия между PATCH и PUT

1. **Цель и семантика:**
   - **PUT** — полная замена ресурса. Клиент отправляет всё представление объекта, и сервер полностью заменяет старый ресурс новым.
   - **PATCH** — частичное обновление. Клиент отправляет только изменённые поля, остальные остаются без изменений.

2. **Структура данных:**
   - **PUT** — требует полный объект. Если какое-то поле не указано, оно будет удалено.
   - **PATCH** — требует только изменённые поля. Остальные поля сохраняются.

3. **Идемпотентность:**
   - **PUT** — всегда идемпотентен: повторный запрос приводит к одному и тому же результату.
   - **PATCH** — может быть идемпотентным, но это зависит от реализации сервера.

---

##  Когда использовать PATCH и PUT

- **PUT**:
  - Когда нужно заменить весь ресурс целиком.
  - Когда клиент знает полную структуру объекта.
  - Для синхронизации состояния между клиентом и сервером.

- **PATCH**:
  - Когда нужно изменить только отдельные поля ресурса.
  - Для оптимизации передачи данных (особенно при больших объектах).
  - Когда структура объекта может меняться или быть частично известна.

---

##  Примеры использования

###  Пример: PUT — полная замена пользователя
```javascript
fetch('/users/1', {
  method: 'PUT',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    name: 'John Doe',
    email: 'john@example.com'
  })
})
  .then(res => res.json())
  .then(data => console.log('User replaced:', data));
```
- Здесь вы полностью заменяете пользователя с id=1. Если не указать поле, оно будет удалено.

###  Пример: PATCH — частичное обновление пользователя
```javascript
fetch('/users/1', {
  method: 'PATCH',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    email: 'john.new@example.com'
  })
})
  .then(res => res.json())
  .then(data => console.log('User updated:', data));
```
- Здесь вы обновляете только поле `email` пользователя с id=1, остальные поля не затрагиваются.

---

##  Советы и типичные ошибки

- Не используйте PUT для частичного обновления — это приведёт к потере неуказанных данных.
- Не используйте PATCH для полной замены ресурса — это нарушает семантику REST.
- Проверяйте, поддерживает ли сервер PATCH (не все API реализуют этот метод).
- Убедитесь, что структура данных соответствует назначению метода.
- Для больших объектов используйте PATCH для экономии трафика.

---

##  Сравнительная таблица PATCH и PUT

| Критерий         | PUT (полная замена)                   | PATCH (частичное обновление)         |
|------------------|---------------------------------------|--------------------------------------|
| Назначение       | Полная замена ресурса                 | Изменение отдельных полей            |
| Объём данных     | Весь объект                           | Только изменённые поля               |
| Идемпотентность  | Да                                    | Может быть, зависит от реализации    |
| Потеря данных    | Да, если поле не указано              | Нет, остальные поля сохраняются      |
| Типичный путь    | `/users/1`                            | `/users/1`                           |

---

##  Итог

- **PUT** — для полной замены ресурса, требует полный объект, всегда идемпотентен.
- **PATCH** — для частичного обновления, требует только изменённые поля, может быть идемпотентен.
- Используйте методы по назначению для корректной работы API и предотвращения потери данных.

##  ЗАДАЧИ

Задачи по теме `PATCH и PUT: различия и практика`:

---

###  Задача 1: Обновление профиля
Пользователь хочет изменить только свой email. Какой метод выбрать? Приведите пример запроса.
<details>
<summary> Решение</summary>

- Метод: PATCH
- Пример:

```javascript
fetch('/users/2', {
  method: 'PATCH',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ email: 'new@email.com' })
})
```

</details>

---

###  Задача 2: Полная замена
Когда нужно использовать PUT, а не PATCH? Приведите пример.
<details>
<summary> Решение</summary>

- PUT используют, когда нужно заменить весь объект.
- Пример:

```javascript
fetch('/users/2', {
  method: 'PUT',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ name: 'Alice', email: 'alice@email.com' })
})
```

</details>

---

###  Задача 3: Ошибка при использовании PUT
Что произойдёт, если при PUT-запросе не указать одно из полей объекта?
<details>
<summary> Решение</summary>

Это поле будет удалено из ресурса на сервере, так как PUT заменяет весь объект.

</details>

---

###  Задача 4: PATCH и большие объекты
Почему PATCH предпочтительнее для обновления одного поля в большом объекте?
<details>
<summary> Решение</summary>

PATCH позволяет отправить только изменённые данные, экономя трафик и ускоряя обработку.

</details>

---

###  Задача 5: Пример PATCH-запроса
Напишите PATCH-запрос для обновления поля `price` у товара с id=10. Новая цена — 999.
<details>
<summary> Решение</summary>

```javascript
fetch('/products/10', {
  method: 'PATCH',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ price: 999 })
})
```

</details>

---

 Эти задачи помогут закрепить различия между PATCH и PUT и научиться правильно их применять на практике! 